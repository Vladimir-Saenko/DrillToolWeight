(function(){var e=function(){var e={},t={exports:e};(function(){var e=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance;var t=function(){this.param=null;this.config={rate:10,resourceRate:2,filterRegular:"googlebot|bingbot|yahoo|baidu",receiverUrl:"perf.mmstat.com/p.gif"};this.context={isSend:false,timing:null}};var n=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")};t.prototype={init:function(e){this.config=e||this.config;var t=this;try{if(document.addEventListener){window.addEventListener("load",function(){t._onloadAction.apply(t)},false)}else if(document.attachEvent){window.attachEvent("onload",function(){t._onloadAction.apply(t)})}}catch(n){}},_onloadAction:function(){if(!this._validate()){return}var e=this;setTimeout(function(){if(!e.context.isSend){e._sendFWIP();e._send();e.context.isSend=true}},100)},_sendFWIP:function(){if(location.protocol==="https:"){return}var e=/(chrome)\//.exec(navigator.userAgent.toLowerCase());if(e==null||!e.length){return}var t=(new Date).getTime();var n=this;var r=new XMLHttpRequest;r.open("get","http://style.aliunicorn.com/wimg/common/single/fwip.png?t=0_0",true);r.onreadystatechange=function(){if(r.readyState==4){var e=r.getAllResponseHeaders().match(/\sFW_IP:\s?([0-9\.]{7,15}),?\s/);if(!e||e.length<2||!e[1]){return}e=e[1];t=(new Date).getTime()-t;var i="http://"+n.config.receiverUrl;i+="?type=cdnserver&serverIp="+e+"&pageId="+n._getPageId().pageId+"&cost="+t;var a=new Image;a.onload=function(){a=null};a.src=i}};r.send()},_validate:function(){if(!this._filter()){return false}this.param=window["PAGE_TIMING"];if(!this.param){return false}var e=this.config.rate;if(!this._lottery(e)){return false}return true},_lottery:function(e){var t=this._getCookie("ali_apache_id");if(t==""||t=="-"){return false}var n=t.substring(t.length-1);var r=false;if(e==0){r=false}else if(e==10){r=true}else if(n<=e){r=true}return r},_lotteryResource:function(e){var t=Math.floor(Math.random()*1e3)%100;var n=false;if(e==0){n=false}else if(e==100){n=true}else if(t<=e-1&&t>=0){n=true}return n},_serial:function(e){var t=[];for(var n in e){t.push(n+"="+encodeURIComponent(e[n]))}return t.join("&")},_send:function(){var e={userInfo:this._getUserInfo(),pageInfo:this._getPageInfo(),pageTimeingInfo:this._getPageTiming()};var t=this._serial(e.userInfo)+"&"+this._serial(e.pageInfo)+"&"+this._serial(e.pageTimeingInfo);var n=("https:"===document.location.protocol?"https://":"http://")+this.config.receiverUrl+"?"+t;var r=new Image;r.onload=function(){r=null};r.src=n;try{this._sendResource()}catch(i){}},_serialResource:function(e){var t=[];var n="|-|";for(var r in e){t.push(r+"="+encodeURIComponent(e[r]))}return t.join(n)},_sendResource:function(){if(!this._resourceFilter()){return}var e=this.config.resourceRate;var t=this._lotteryResource(e);if(!t){return}var n=this._getResourceTiming(),r=50;if(n.length>r){var i=[],a=[];for(var o=0;o<n.length;o++){if(o<r){i.push(n[o])}else{a.push(n[o])}}this._sendResourceData(i,1,2);this._sendResourceData(a,2,2)}else{this._sendResourceData(n,1,1)}},_sendResourceData:function(e,t,n){var r={pageInfo:this._getPageId(),resourceTimeingInfo:e,index:{index:t},total:{total:n}};var i="|--|";var a=this._serial(r.pageInfo)+i+this._serial(r.index)+i+this._serial(r.total)+i+"resoucecount="+r.resourceTimeingInfo.length;for(var o=0;o<r.resourceTimeingInfo.length;o++){a+=i+this._serialResource(r.resourceTimeingInfo[o])}var s="new-page-timing-iframe"+t;if(document.getElementById(s)){return}var c=("https:"===document.location.protocol?"https://":"http://")+this.config.receiverUrl;var u=document.createElement("div");u.innerHTML='<iframe width="0" height="0" id="'+s+'"name="'+s+'" frameBorder="0" style="top: -100%; position: absolute;"></iframe>';document.body.appendChild(u);var d=document.createElement("form");d.style.display="none";d.target=s;d.method="POST";d.action=c;var f=document.createElement("input");f.type="hidden";f.name="resourcetiming";f.value=a;d.appendChild(f);var l=document.createElement("input");l.type="submit";l.value="";d.appendChild(l);document.body.appendChild(d);d.submit()},_filter:function(){var t=navigator.userAgent.toLowerCase();if(new RegExp(this.config.filterRegular).test(t)){return false}if(e===undefined){return false}this.context.timing=e.timing;return true},_resourceFilter:function(){if(e===undefined){return false}if(!("getEntriesByType"in e)||!(e.getEntriesByType("resource")instanceof Array)){return false}var t=navigator.userAgent.toLowerCase();var n=/(msie\s|trident.*rv:)([\w.]+)/;var r=n.exec(t);if(r!=null&&r.length>=2&&parseInt(r[2],10)>=10){return true}var i=/(opr|opera)\/([\w.]+)/;r=i.exec(t);if(r!=null&&r.length>=2&&parseInt(r[2],10)>=27){return true}var a=/(chrome)\/([\w.]+)/;r=a.exec(t);if(r!=null&&r.length>=2&&parseInt(r[2],10)>=36){return true}return false},_getCookie:function(e){var t="(?:; )?"+e+"=([^;]*);?";var r=new RegExp(t);if(r.test(document.cookie)){var i=decodeURIComponent(RegExp["$1"]);if(n(i).length>0){return i}else{return"-"}}else{return"-"}},_getUserInfo:function(){var e={};var t="",n=true;var r=this._getCookie("xman_us_f");if(r=="-"){r=""}var i=/x_user=([^&"]+)/;if(r&&i.test(r)){r.match(i);r=RegExp.$1;r=r.split("|");if(r.length>=5){t=r[4]}}if(t!==""){n=false}else{n=true}e.memberSeq=t;e.isNewUser=n;return e},_getPageId:function(){var e={};if(window&&window.dmtrack_pageid){e.pageId=window.dmtrack_pageid}else{e.pageId=""}return e},_getPageInfo:function(){var e={};if(window&&window.dmtrack_pageid){e.pageId=window.dmtrack_pageid}else{e.pageId=""}var t=this._getCookie("aep_usuc_f");if(t=="-"){t=""}var n=/site=([^&"]+)/;if(t&&n.test(t)){t.match(n);e.site=RegExp.$1}else{e.site=""}var r=window.PAGE_TIMING;if(r&&r.pageType){e.pageType=r.pageType}else{e.pageType=""}e.site="m";return e},_getUaMonitor:function(){var e={}},_getPageTiming:function(){var e=this.context.timing;var t={ns:e.navigationStart,ules:e.unloadEventStart,ulee:e.unloadEventEnd,rs:e.redirectStart,re:e.redirectEnd,fs:e.fetchStart,dls:e.domainLookupStart,dle:e.domainLookupEnd,cs:e.connectStart,ce:e.connectEnd,scs:e.secureConnectionStart||0,resqs:e.requestStart,resps:e.responseStart,respe:e.responseEnd,dl:e.domLoading,di:e.domInteractive,dcles:e.domContentLoadedEventStart,dclee:e.domContentLoadedEventEnd,domc:e.domComplete,les:e.loadEventStart,lee:e.loadEventEnd,srt:this._getStartRenderTiming(),fst:this._getFirstPageTiming()};return t},_getResourceTiming:function(){var e=[];var t=window.performance.getEntriesByType("resource");var n=function(e){if(e==undefined||e==0){return 0}else{return Math.floor(e)}};for(var r in t){var i=t[r];if(i.initiatorType==undefined){continue}e.push({rs:n(i.redirectStart),re:n(i.redirectEnd),fs:n(i.fetchStart),st:n(i.startTime),dls:n(i.domainLookupStart),dle:n(i.domainLookupEnd),cs:n(i.connectStart),ce:n(i.connectEnd),scs:n(i.secureConnectionStart),resqs:n(i.requestStart),resps:n(i.responseStart),respe:n(i.responseEnd),restype:i.initiatorType,n:i.name})}return e},_getStartRenderTiming:function(){var e=this.context.timing;var t=this.param["startRender"];if(e.msFirstPaint&&e.msFirstPaint>0){return e.msFirstPaint}else if(window&&window.chrome&&typeof window.chrome.loadTimes==="function"&&window.chrome.loadTimes().firstPaintTime>0){return Math.ceil(window.chrome.loadTimes().firstPaintTime*1e3)}else if(t>0){return t}else{return 0}},_getFirstPageTiming:function(){var e=this.param["firstScreen"];if(e>0){return e}else{return 0}}};(new t).init()})();return t.exports}()})();